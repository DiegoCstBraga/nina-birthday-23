{"version":3,"file":"index-CzMrOOxG.js","sources":["../../src/utils/addButton.ts","../../src/scenes/startMenu.ts","../../src/constants.ts","../../src/objects/buttonTooltip.ts","../../src/objects/confetti.ts","../../src/objects/makeNewFriend.ts","../../src/objects/player1.ts","../../src/objects/renderBaseScenario.ts","../../src/utils/date.ts","../../src/scenes/room1/index.ts","../../src/scenes/room2/index.ts","../../src/main.ts"],"sourcesContent":["type AddButtonProps = {\n  txt?: string;\n  action?: () => void;\n  width?: number;\n  height?: number;\n  position?: [number, number];\n};\n\nexport function addButton({\n  txt = 'text',\n  width = 240,\n  height = 80,\n  action = () => debug.log('click'),\n  position = [20, 20],\n}: AddButtonProps) {\n  const [posX, posY] = position;\n  const p = vec2(posX, posY);\n\n  // add a parent background object\n  const btn = add([\n    rect(width, height, { radius: 8 }),\n    pos(center()),\n    area(),\n    scale(1),\n    anchor('center'),\n    outline(4),\n    color(255, 255, 255),\n    layer('ui'),\n  ]);\n\n  // add a child object that displays the text\n  btn.add([text(txt), anchor('center'), color(0, 0, 0)]);\n\n  // onHoverUpdate() comes from area() component\n  // it runs every frame when the object is being hovered\n  btn.onHoverUpdate(() => {\n    const t = time() * 10;\n    btn.color = hsl2rgb((t / 10) % 1, 0.6, 0.7);\n    btn.scale = vec2(1.1);\n    setCursor('pointer');\n  });\n\n  // onHoverEnd() comes from area() component\n  // it runs once when the object stopped being hovered\n  btn.onHoverEnd(() => {\n    btn.scale = vec2(1);\n    btn.color = rgb();\n  });\n\n  // onClick() comes from area() component\n  // it runs once when the object is clicked\n  btn.onClick(action);\n\n  return btn;\n}\n","import { addButton } from '../utils/addButton';\n\nexport function startMenu() {\n  const bgSong = play('bgSong', {\n    volume: 0.2,\n    loop: true,\n  });\n\n  setBackground(Color.fromHex('#202020'));\n  const bg = add([\n    sprite('startMenuBg'),\n    layer('bg'),\n    pos(center()),\n    anchor('center'),\n  ]);\n\n  const dynScale = (timeVariant: number) => wave(0.5, 0.8, time() + timeVariant);\n  const dynAngle = (timeVariant: number) => wave(-9, 9, time() + timeVariant);\n\n  onUpdate(() => {\n    bg.use(scale(dynScale(1)));\n    bg.use(rotate(dynAngle(1)));\n  });\n\n  const start = () => {\n    go('room1', { origin: 'mainMenu' });\n    bgSong?.stop();\n  };\n  addButton({ txt: 'Start', action: start });\n}\n","export const MOVE_SPEED = 300;\n\nexport const FLOOR_HEIGHT = 40;\nexport const BG_COLOR = '#FFB3BA';\nexport const WALL_COLOR = '#FF677D';\n","import { MOVE_SPEED } from '../constants';\n\nexport function renderButtonTooltip() {\n  const buttonTooltip = make([\n    rect(40, 40),\n    anchor('center'),\n    pos(80 / 2 + 20, -40),\n    'tooltip',\n    outline(4),\n  ]);\n\n  buttonTooltip.onAdd(() => {\n    buttonTooltip.add([\n      text('E', {\n        size: 32,\n      }),\n      anchor('center'),\n      color(0, 0, 0),\n    ]);\n  });\n\n  return buttonTooltip;\n}\n","import { GameObj } from 'kaplay';\n\nconst DEF_COUNT = 80;\nconst DEF_GRAVITY = 800;\nconst DEF_AIR_DRAG = 0.9;\nconst DEF_VELOCITY = [1000, 4000];\nconst DEF_ANGULAR_VELOCITY = [-200, 200];\nconst DEF_FADE = 0.3;\nconst DEF_SPREAD = 60;\nconst DEF_SPIN = [2, 8];\nconst DEF_SATURATION = 0.7;\nconst DEF_LIGHTNESS = 0.6;\n\ntype AddConfettiProps = {\n  opt: any;\n};\n\nexport function addConfetti({ opt = {} }: AddConfettiProps) {\n  const sample = (s) => (typeof s === 'function' ? s() : s);\n  for (let i = 0; i < (opt.count ?? DEF_COUNT); i++) {\n    const p = add([\n      pos(sample(opt.pos ?? vec2(0, 0))),\n      choose([rect(rand(5, 20), rand(5, 20)), circle(rand(3, 10))]),\n      color(\n        sample(opt.color ?? hsl2rgb(rand(0, 1), DEF_SATURATION, DEF_LIGHTNESS))\n      ),\n      opacity(1),\n      lifespan(4),\n      scale(1),\n      anchor('center'),\n      rotate(rand(0, 360)),\n    ]);\n\n    const spin = rand(DEF_SPIN[0], DEF_SPIN[1]);\n    const gravity = opt.gravity ?? DEF_GRAVITY;\n    const airDrag = opt.airDrag ?? DEF_AIR_DRAG;\n    const heading = sample(opt.heading ?? 0) - 90;\n    const spread = opt.spread ?? DEF_SPREAD;\n    const head = heading + rand(-spread / 2, spread / 2);\n    const fade = opt.fade ?? DEF_FADE;\n    const vel = sample(opt.velocity ?? rand(DEF_VELOCITY[0], DEF_VELOCITY[1]));\n    let velX = Math.cos(deg2rad(head)) * vel;\n    let velY = Math.sin(deg2rad(head)) * vel;\n    const velA = sample(\n      opt.angularVelocity ??\n        rand(DEF_ANGULAR_VELOCITY[0], DEF_ANGULAR_VELOCITY[1])\n    );\n\n    p.onUpdate(() => {\n      velY += gravity * dt();\n      p.pos.x += velX * dt();\n      p.pos.y += velY * dt();\n      p.angle += velA * dt();\n      p.opacity -= fade * dt();\n      velX *= airDrag;\n      velY *= airDrag;\n      p.scale.x = wave(-1, 1, time() * spin);\n    });\n  }\n}\n\ntype showConfetties = {\n  maxConfetti?: number;\n  delay?: number;\n  loop?: boolean;\n};\n\nexport async function showConfetties({\n  maxConfetti = 11,\n  delay = 0.5,\n  loop = false,\n}: showConfetties) {\n  for (let i = 1; i < maxConfetti; loop ? i : i++) {\n    await wait(delay, () => {\n      addConfetti({\n        opt: {\n          pos: vec2(width() / i, height() / 1.5),\n        },\n      });\n\n      addConfetti({\n        opt: {\n          pos: vec2(width() / (maxConfetti - i), height() / 1.5),\n        },\n      });\n    });\n  }\n}\n","import { FLOOR_HEIGHT } from '../constants';\n\ntype MakeNewFriend = {\n  spriteName: string;\n  initialPosX?: number;\n  initialPosY?: number;\n};\n\nexport function makeNewFriend({\n  spriteName,\n  initialPosX,\n  initialPosY,\n}: MakeNewFriend) {\n  const posX = initialPosX ?? width() / 2;\n  const posY = initialPosY ?? height() - FLOOR_HEIGHT - 140;\n\n  const obj = make([\n    pos(posX, posY),\n    body(),\n    area(),\n    z(10),\n    layer('char'),\n    'friend',\n  ]);\n\n  obj.use(\n    sprite(spriteName, {\n      width: 120,\n      height: 120,\n    })\n  );\n\n  return obj;\n}\n","import { MOVE_SPEED } from '../constants';\n\nexport function renderPlayer1() {\n  const player = make([\n    sprite('nina', {\n      height: 120,\n      width: 120,\n      fill: true,\n    }),\n    area(),\n    pos(10, 10),\n    body(),\n    z(10),\n    layer('char'),\n    'player'\n  ]);\n\n  onKeyPress(['up', 'space'], () => {\n    if (!player.isJumping()) {\n      player.jump();\n    }\n  });\n  onKeyDown('right', () => {\n    player.move(1 * MOVE_SPEED, 0);\n  });\n  onKeyDown('down', () => {\n    player.move(0, 1 * MOVE_SPEED);\n  });\n  onKeyDown('left', () => {\n    player.move(-1 * MOVE_SPEED, 0);\n  });\n\n  return player;\n}\n","import { BG_COLOR, FLOOR_HEIGHT, WALL_COLOR } from '../constants';\n\nexport function renderBaseScenario() {\n  setBackground(Color.fromHex(BG_COLOR));\n\n  setGravity(1600);\n\n  const ceiling = add([\n    rect(width(), FLOOR_HEIGHT),\n    color(WALL_COLOR),\n    pos(0, 0),\n    area(),\n    body({\n      isStatic: true,\n    }),\n    outline(4),\n    layer('obj'),\n  ]);\n\n  const floor = add([\n    rect(width(), FLOOR_HEIGHT),\n    color(WALL_COLOR),\n    pos(0, height() - FLOOR_HEIGHT),\n    area(),\n    body({\n      isStatic: true,\n    }),\n    outline(4),\n    layer('obj'),\n  ]);\n  \n  const leftWall = add([\n    rect(10, height()),\n    color(WALL_COLOR),\n    pos(0),\n    area(),\n    body({\n      isStatic: true,\n    }),\n    outline(4),\n    layer('obj'),\n  ]);\n\n  const rightWall = add([\n    rect(10, height()),\n    color(WALL_COLOR),\n    pos(width() - 10, 0),\n    area(),\n    body({\n      isStatic: true,\n    }),\n    outline(4),\n    layer('obj'),\n  ]);\n}\n","export function isCurrentDateAfterOrEqualNiver() {\n  const targetDate = new Date(2025, 10, 7);\n\n  // Data atual\n  const currentDate = new Date();\n\n  targetDate.setHours(0, 0, 0, 0);\n  currentDate.setHours(0, 0, 0, 0);\n\n  return currentDate >= targetDate;\n}\n","import { AudioPlay, KEventController } from 'kaplay';\nimport { FLOOR_HEIGHT } from '../../constants';\nimport { renderButtonTooltip } from '../../objects/buttonTooltip';\nimport { showConfetties } from '../../objects/confetti';\nimport { makeNewFriend } from '../../objects/makeNewFriend';\nimport { renderPlayer1 } from '../../objects/player1';\nimport { renderBaseScenario } from '../../objects/renderBaseScenario';\nimport { addButton } from '../../utils/addButton';\nimport { isCurrentDateAfterOrEqualNiver } from '../../utils/date';\n\ntype Room1Props = {\n  origin?: 'mainMenu' | 'room2';\n};\n\nconst MESSAGE_BIRTHDAY =\n  'Feliz aniversário de 3 anos meu amooor, sou muito grato de entrarmos nesta marca juntos e que venham muitos anos pela frente. Te amo muitoooo <3';\n\nexport function room1({ origin }: Room1Props) {\n  renderBaseScenario();\n  const goBack = () => {\n    go('mainMenu');\n    audio?.stop();\n  };\n\n  const returnButton = addButton({\n    txt: '<- Return',\n    position: [20, 20],\n    action: goBack,\n  });\n  returnButton.moveTo(160, 100);\n\n  const dynScale = (timeVariant: number) => wave(0.8, 1, time() + timeVariant);\n  const dynAngle = (timeVariant: number) => wave(-9, 9, time() + timeVariant);\n\n  const makeSounds = () => [sprite('sounds'), pos(-32), rotate(), 'notes'];\n  let isAudioPlaying = false;\n\n  let audio: AudioPlay;\n  let audioTime: number = 0;\n\n  function displayAudioEffect() {\n    const audios = jukebox.add(makeSounds());\n    const audios2 = audios.add(makeSounds());\n    const audios3 = audios2.add(makeSounds());\n\n    audios.onUpdate(() => {\n      audios.use(scale(dynScale(3)));\n      audios.use(rotate(dynAngle(3)));\n    });\n\n    audios2.onUpdate(() => {\n      audios2.use(scale(dynScale(2)));\n      audios2.use(rotate(dynAngle(2)));\n    });\n\n    audios3.onUpdate(() => {\n      audios3.use(scale(dynScale(1)));\n      audios3.use(rotate(dynAngle(1)));\n    });\n\n    audio.onEnd(() => {\n      isAudioPlaying = false;\n      audioTime = 0;\n      jukebox.remove(audios);\n    });\n  }\n\n  const jukeboxAction = () => {\n    if (!audio) {\n      audio = play('mainSong', {\n        volume: 0.5,\n        seek: audioTime,\n      });\n      isAudioPlaying = true;\n\n      displayAudioEffect();\n      return;\n    }\n\n    if (!isAudioPlaying) {\n      audio.play();\n      audio.seek(audioTime);\n      isAudioPlaying = true;\n\n      displayAudioEffect();\n      return;\n    }\n\n    if (isAudioPlaying) {\n      audioTime = audio.time();\n\n      audio.stop();\n      isAudioPlaying = false;\n\n      jukebox.removeAll('notes');\n    }\n  };\n\n  const jukebox = add([\n    sprite('jukebox', {\n      width: 120,\n      height: 180,\n      fill: true,\n    }),\n    pos(200, height() - FLOOR_HEIGHT - 180),\n    area(),\n    'item',\n    {\n      action: jukeboxAction,\n    },\n  ]);\n\n  const diego = makeNewFriend({ spriteName: 'diego' });\n\n  const cakeAction = async () => {\n    if (!audio) {\n      audio = play('mainSong', {\n        volume: 0.5,\n        seek: audioTime,\n      });\n      isAudioPlaying = true;\n\n      displayAudioEffect();\n    }\n\n    if (!birthdayText.exists()) {\n      add(birthdayText);\n\n      showConfetties({ maxConfetti: 11, delay: 1 });\n\n      if (!diego.exists()) {\n        add(diego);\n\n        diego.onUpdate(() => {\n          if (birthdayText.exists() || isAudioPlaying) {\n            diego.move(Math.floor(time()) % 2 ? 100 : -100, 0);\n            if (diego.isGrounded()) {\n              diego.jump();\n            }\n          }\n        });\n      }\n    }\n  };\n\n  const cake = add([\n    sprite('cake3', {\n      height: 240,\n      width: 240,\n    }),\n    pos(600, height() - FLOOR_HEIGHT - 240),\n    area(),\n    'item',\n    {\n      action: cakeAction,\n    },\n  ]);\n\n  const birthdayText = make([\n    pos(40, 160),\n    text(MESSAGE_BIRTHDAY, {\n      width: width() - 40 * 2,\n      size: 40,\n      align: 'center',\n      lineSpacing: 8,\n      letterSpacing: 4,\n      transform: (idx, ch) => ({\n        color: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.9, 0.6),\n        pos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),\n        scale: wave(1, 1.2, time() * 3 + idx),\n        angle: wave(-9, 9, time() * 3 + idx),\n      }),\n    }),\n    layer('ui'),\n  ]);\n\n  birthdayText.onAdd(() =>\n    wait(10, () => {\n      destroy(birthdayText);\n    })\n  );\n\n  const nextDoorText = make([\n    pos(40, height() - 40 - 120 - 200),\n    text('Próxima porta só será liberada no dia 07/11 em diante', {\n      width: width() - 40 * 2,\n      size: 40,\n      align: 'center',\n      lineSpacing: 8,\n      letterSpacing: 4,\n      transform: (idx, ch) => ({\n        color: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.9, 0.1),\n        pos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),\n        scale: wave(1, 1.2, time() * 3 + idx),\n        angle: wave(-9, 9, time() * 3 + idx),\n      }),\n    }),\n    layer('ui'),\n  ]);\n\n  nextDoorText.onAdd(() => {\n    wait(3, () => nextDoorText.destroy());\n  });\n\n  const doorAction = () => {\n    if (isCurrentDateAfterOrEqualNiver()) {\n      audio?.stop();\n      go('room2');\n    } else {\n      add(nextDoorText);\n    }\n  };\n\n  const door = add([\n    sprite('door', {\n      height: 120,\n      width: 120,\n    }),\n    pos(width() - 160, height() - FLOOR_HEIGHT - 120),\n    area(),\n    'item',\n    {\n      action: doorAction,\n    },\n  ]);\n\n  let actionButton: KEventController;\n\n  const player = renderPlayer1();\n  add(player);\n\n  if (origin === 'mainMenu') {\n    player.moveTo(100, height() - 80 - 80);\n  }\n\n  if (origin === 'room2') {\n    player.moveTo(width() - 200, height() - 80 - 80);\n  }\n\n  const buttonTooltip = renderButtonTooltip();\n\n  player.onCollide('item', (obj) => {\n    if (!buttonTooltip.exists()) {\n      obj.add(buttonTooltip);\n\n      actionButton = onKeyPress('e', () => obj.action());\n    }\n  });\n\n  player.onCollideEnd('item', (obj) => {\n    obj.removeAll('tooltip');\n    actionButton.cancel();\n  });\n}\n","import { KEventController } from 'kaplay';\nimport { FLOOR_HEIGHT } from '../../constants';\nimport { renderButtonTooltip } from '../../objects/buttonTooltip';\nimport { showConfetties } from '../../objects/confetti';\nimport { makeNewFriend } from '../../objects/makeNewFriend';\nimport { renderPlayer1 } from '../../objects/player1';\nimport { renderBaseScenario } from '../../objects/renderBaseScenario';\n\nconst MESSAGE_BIRTHDAY =\n  'Feliz 23 anos, meu amoorrr. Eu e toda sua família lhe desejamos um dia muito incrível e especial.\\n\\nDesejamos muitas felicidades, muita saúde e que você continue sendo essa pessoa maravilhosa. Te amamos muito <3';\n\nconst friends = ['chico', 'vivi', 'clo', 'gaby', 'diego'];\n\nexport function room2() {\n  renderBaseScenario();\n\n  const song = play('parabens', {\n    volume: 0.5,\n    loop: true,\n  });\n\n  const door = add([\n    sprite('door', {\n      height: 120,\n      width: 120,\n    }),\n    pos(40, height() - FLOOR_HEIGHT - 120),\n    area(),\n    'item',\n    {\n      action: () => {\n        go('room1', { origin: 'room2' });\n        song.stop();\n      },\n    },\n  ]);\n\n  showConfetties({ loop: true, delay: 1.5 });\n\n  friends.forEach((friend, index) => {\n    const randPosX = rand(120, width() - 120);\n    console.log({ friend, randPosX, width: width() });\n    const madeFriend = makeNewFriend({\n      spriteName: friend,\n      initialPosX: randPosX,\n    });\n\n    add(madeFriend);\n  });\n\n  on('update', 'friend', (friendObj) => {\n    if (friendObj.exists()) {\n      friendObj.move(Math.floor(time()) % 2 ? 100 : -100, 0);\n      if (friendObj.isGrounded()) {\n        friendObj.jump();\n      }\n    }\n  });\n\n  const cake = add([\n    sprite('cake23', {\n      height: 240,\n      width: 240,\n    }),\n    pos(600, height() - FLOOR_HEIGHT - 240),\n    area(),\n    layer('obj'),\n    {\n      action: () => {},\n    },\n  ]);\n\n  const birthdayText = make([\n    pos(40, 160),\n    text(MESSAGE_BIRTHDAY, {\n      width: width() - 40 * 2,\n      size: 40,\n      align: 'center',\n      lineSpacing: 8,\n      letterSpacing: 4,\n      transform: (idx, ch) => ({\n        color: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.9, 0.6),\n        pos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),\n        scale: wave(1, 1.2, time() * 3 + idx),\n        angle: wave(-9, 9, time() * 3 + idx),\n      }),\n    }),\n    layer('ui'),\n  ]);\n\n  add(birthdayText);\n\n  const player = renderPlayer1();\n\n  add(player);\n  player.moveTo(40, height() - 120 - 120);\n\n  const buttonTooltip = renderButtonTooltip();\n\n  let actionButton: KEventController;\n\n  player.onCollide('item', (obj) => {\n    obj.add(buttonTooltip);\n\n    actionButton = onKeyPress('e', () => obj.action());\n  });\n\n  player.onCollideEnd('item', (obj) => {\n    obj.removeAll('tooltip');\n    actionButton.cancel();\n  });\n}\n","import kaplay from 'kaplay';\nimport { startMenu } from './scenes/startMenu';\nimport { room1 } from './scenes/room1/index';\nimport { room2 } from './scenes/room2/index';\n\nconst k = kaplay({\n  debug: true,\n  global: true,\n  backgroundAudio: true,\n  buttons: {\n    jump: {\n      keyboard: ['space', 'up'],\n    },\n  },\n  width: 1280,\n  height: 720,\n  letterbox: true,\n});\n\nconst { loadRoot, loadSprite, scene, go } = k;\n\nloadRoot('./'); // A good idea for Itch.io publishing later\n\nloadSprite('startMenuBg', 'sprites/startMenuBg.jpg');\n\nloadSprite('nina', 'sprites/nina.png');\nloadSprite('diego', 'sprites/diego.png');\nloadSprite('clo', 'sprites/clo.png');\nloadSprite('gaby', 'sprites/gaby.png');\nloadSprite('vivi', 'sprites/vivi.png');\nloadSprite('chico', 'sprites/chico.png');\n\nloadSprite('door', 'sprites/door.png');\nloadSprite('cake', 'sprites/cake.png');\nloadSprite('cake3', 'sprites/cake3.png');\nloadSprite('cake23', 'sprites/cake23.png');\nloadSprite('sounds', 'sprites/sounds.png');\nloadSprite('jukebox', 'sprites/jukebox.png');\n\nloadSound('test', 'sounds/test.mp3');\nloadSound('bgSong', 'sounds/bgSong.mp3');\nloadSound('mainSong', 'sounds/mainSong.mp3');\nloadSound('parabens', 'sounds/parabens.mp3');\n\nsetLayers(['bg', 'obj', 'char', 'ui'], 'char');\n\nscene('mainMenu', startMenu);\nscene('room1', ({ origin }) => room1({ origin }));\nscene('room2', room2);\n\ngo('mainMenu');\n"],"names":["addButton","txt","width","height","action","position","posX","posY","btn","t","startMenu","bgSong","bg","dynScale","timeVariant","dynAngle","MOVE_SPEED","FLOOR_HEIGHT","BG_COLOR","WALL_COLOR","renderButtonTooltip","buttonTooltip","DEF_COUNT","DEF_GRAVITY","DEF_AIR_DRAG","DEF_VELOCITY","DEF_ANGULAR_VELOCITY","DEF_FADE","DEF_SPREAD","DEF_SPIN","DEF_SATURATION","DEF_LIGHTNESS","addConfetti","opt","sample","s","i","p","spin","gravity","airDrag","heading","spread","head","fade","vel","velX","velY","velA","showConfetties","maxConfetti","delay","loop","makeNewFriend","spriteName","initialPosX","initialPosY","obj","renderPlayer1","player","renderBaseScenario","isCurrentDateAfterOrEqualNiver","targetDate","currentDate","MESSAGE_BIRTHDAY","room1","origin","audio","makeSounds","isAudioPlaying","audioTime","displayAudioEffect","audios","jukebox","audios2","audios3","jukeboxAction","diego","cakeAction","birthdayText","idx","ch","nextDoorText","doorAction","actionButton","friends","room2","song","friend","index","randPosX","madeFriend","friendObj","k","kaplay","loadRoot","loadSprite","scene","go"],"mappings":"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"}